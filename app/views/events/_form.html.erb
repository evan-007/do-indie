<hr>
<%= form_for @event do |f| %>
	<p>	
		<%= f.label t(:event_name_e) %>
		<%= f.text_field :name, class: "form-control half" %>
	</p><br/>

	<p>
		<%= f.label t(:event_name_k) %>
		<%= f.text_field :ko_name, class: "form-control half" %>
		<%= t(:event_name_note) %>
	</p><br />

<p>
	<% unless @event.avatar.blank? %>
		Current image: <%= image_tag @event.avatar.url :medium %>
	<% end %>
</p>
	<p><%= f.label t(:event_poster) %></p>
	<p><%= f.file_field :avatar %></p>
	<p><%= t(:event_poster_note) %></p>

	<div id="city">
		<p>
			<%= f.label t(:city) %>
			<% if @event.new_record? %>
				<%= f.text_field :city_tokens %>
			<% else %>
				<%= f.text_field :city_tokens, data: {load: [@event.city] } %>
			<% end %>
		</p>
		<p><%= t(:city_note) %></p>
	</div>

	<hr>

	<div id="en_bands">
		<p>
			<%= f.label t(:band_playing) %>
			<% if @event.new_record? %>
				<%= f.text_field :band_tokens %>
			<% else %>
				<%= f.text_field :band_tokens, data: {load: @event.bands} %>
			<% end %>
		</p>
	</div>


	<p><%= t(:band_playing_note)%></p><br>
 

	<hr>
	<div id="en_venue">
		<p>
			<%= f.label t(:venue) %>
			<% if @event.new_record? %>
				<%= f.text_field :venue_tokens %>
			<% else %>
				<%= f.text_field :venue_tokens, data: {load: [@event.venue] } %>
			<% end %>
		</p>
		<p><%= t(:venue_note) %></p>
	</div>
			

  <hr>

	<%= f.label t(:start_date) %>
	<%= f.text_field :date, class: "form-control half date" %><br />
	<%= f.label t(:show_time) %>
	<%= f.text_field :time, placeholder: "e.g. 7:40pm", class: "form-control half" %><br />

	<%= f.label t(:event_contact) %>
	<%= f.text_field :contact, class: "form-control half" %><br />

	<%= f.label t(:facebook_event) %>
	<%= f.text_field :facebook, class: "form-control half", placeholder: "e.g. https://www.facebook.com/events/1412674345611085" %><br />
	<p><%= t(:facebook_event_note)%></p>
	
	<hr>

	<%= f.label t(:ticket_status) %>
	<%= f.select(:ticket, options_for_select([["#{t(:tickets_available)}", true], ["#{t(:sold_out)}", false]], 2)) %><br />

	<p><%= f.label t(:advanced_ticket_price) %>
		<%= f.text_field :price, placeholder: "e.g. 10,000 (Do not enter the currency sign)", class: "form-control half" %>
		<%= t(:advanced_ticket_price_notes) %>
	</p>


	<p>
		<%= f.label t(:door_ticket_price) %>
		<%= f.text_field :door_price, placeholder: "e.g. 10,000 (Do not enter the currency sign)", class: "form-control half" %>
		<%= t(:door_ticket_price_notes) %>
	</p>

	<p>
		<%= f.label t(:buy_tickets) %>
		<%= f.text_field :ticket_url, class: "form-control half" %>
		<%= t(:buy_tickets_notes) %>
	</p>

	<hr>
	<%= f.label t(:event_details_en) %>
	<%= f.text_area :info, rows: 10, class: "form-control mid" %><br />

	<%= f.label t(:event_details_ko) %>
	<%= f.text_area :info_ko, rows: 10, class: "form-control mid" %><br />
	<p><%= t(:event_details_notes)%></p><br>
	
	<%= f.submit nil, class: "btn btn-primary" %>
	
<% end %>

<script>
  $(document).ready(function() { $('#event_band_ids').chosen({width: "50%"}); });
  $(document).ready(function() { $('#event_venue_id').chosen({width: "50%"}); });
  $(document).ready(function() { $('#event_city_id').chosen({width: "50%"}); });
  
 
	$(document).ready(function() {
		$('.date').datepicker({format: 'yyyy/mm/dd'});
	})

	$(document).ready(function() {
		$('#en_bands').find('#event_band_tokens').tokenInput("/bands.json", { theme: "facebook",
			resultsFormatter: function(item){ return '<li>' + item.name +' '+ item.korean_name+'</li>'},
			prePopulate: $('#event_band_tokens').data('load')}
			);
	});
  
  $(document).ready(function() {
		$('#en_venue').find('#event_venue_tokens').tokenInput("/venues.json", { theme: "facebook",
			resultsFormatter: function(item){ return '<li>' + item.name +' '+ item.korean_name+'</li>'},
			tokenLimit: 1, prePopulate: $('#event_venue_tokens').data('load')}
			);
	});

  $(document).ready(function() {
		$('#city').find('#event_city_tokens').tokenInput("/cities.json", { theme: "facebook",
			propertyToSearch: "en_name",
			resultsFormatter: function(item){ return '<li>' + item.en_name +' '+ item.ko_name+'</li>'},
			tokenLimit: 1, prePopulate: $('#event_city_tokens').data('load')}
			);
	});

  
</script>